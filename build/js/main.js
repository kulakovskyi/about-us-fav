"use strict";

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

(function () {})();

var teamLeftArrow = document.querySelector('.team__controls-left'),
    teamRightArrow = document.querySelector('.team__controls-right');
var sliderLength = document.querySelector('.all');
sliderLength.textContent = 4;

if (window.innerWidth < 1150) {
  sliderLength.textContent = 5;
}

if (window.innerWidth < 850) {
  sliderLength.textContent = 7;
}

document.querySelector('.current').textContent = 1;
var slider1 = slider('slider', '.team__slide');

function slider(id, itemSelector, config) {
  var el = document.getElementById(id);
  el.classList.add('slider');
  var mediaStep = '';
  var activeIndIndex = 0;
  var toogleIndex = 0;
  var items = el.querySelectorAll(itemSelector);

  function getMediaStep() {
    var width = window.innerWidth;
    var newStep = width > 1150 ? 'lg' : width > 850 ? 'md' : 'xs';

    if (mediaStep !== newStep) {
      mediaStep = newStep;
      obj.buildSlider();
    }
  }

  function getItemsQuantity() {
    return obj.config.elemsPerPage[mediaStep];
  }

  function onResize() {
    getMediaStep();
  }

  var obj = {
    activeIndex: 0,
    activeIndIndex: activeIndIndex > 0 ? activeIndIndex : 0,
    toogleIndex: 0,
    init: function init() {
      getMediaStep();
      var startX = 0;
      var touched = false;
      var inner = el.querySelector('.slider-inner');
      var indicators = el.querySelectorAll('.slider-indicator');

      function onMouseDown(e) {
        startX = e.clientX || e.touches[0].clientX;
        touched = true;
        var weekly = document.querySelectorAll('.result__weeks-btn'); // for (const item of weekly) item.addEventListener('touchstart', selectWeek);
      }

      function onMouseMove(e) {
        e.preventDefault();

        if (touched) {
          inner = inner || el.querySelector('.slider-inner');
          var x = e.clientX || e.touches[0].clientX;
          var diff = x - startX;

          if (diff < 0 && activeIndIndex < indicators.length - 1 || diff > 0 && activeIndIndex > 0) {
            inner.style.transform = 'translateX(' + diff + 'px)';
          }
        }
      }

      function onMouseEnd(e) {
        if (touched) {
          var x = e.clientX || e.changedTouches[0].clientX;

          if (x - startX > 30) {
            toggleIndex(activeIndIndex - 1);
          } else if (startX - x > 30) {
            toggleIndex(activeIndIndex + 1);
          }

          inner = inner || el.querySelector('.slider-inner');
          inner.style.transform = '';
        }

        touched = false;
      }

      teamRightArrow.addEventListener('click', function () {
        toggleIndex(activeIndIndex + 1); // obj.next()
      });
      teamLeftArrow.addEventListener('click', function () {
        toggleIndex(activeIndIndex - 1); // obj.prev()
      });
      window.removeEventListener('resize', onResize);
      window.addEventListener('resize', onResize);
      el.removeEventListener('mousedown', onMouseDown);
      el.removeEventListener('touchstart', onMouseDown);
      el.addEventListener('mousedown', onMouseDown);
      el.addEventListener('touchstart', onMouseDown);
      el.removeEventListener('mousemove', onMouseMove);
      el.removeEventListener('touchmove', onMouseMove);
      el.addEventListener('mousemove', onMouseMove); // el.addEventListener('touchmove', onMouseMove);

      window.removeEventListener('mouseup', onMouseEnd);
      window.removeEventListener('touchend', onMouseEnd);
      window.addEventListener('mouseup', onMouseEnd);
      window.addEventListener('touchend', onMouseEnd);
      return obj;
    },
    config: {
      elemsPerPage: _objectSpread(_objectSpread({}, {
        'lg': 4,
        'md': 3,
        'xs': 2
      }), config && config.elemsPerPage || {})
    },
    buildSlider: function buildSlider() {
      obj.removeSlider();
      var wrapper = document.createElement("div");
      wrapper.className = 'slider-wrapper';
      var inner = document.createElement("div");
      inner.className = 'slider-inner';
      wrapper.appendChild(inner);
      el.appendChild(wrapper);

      if (obj.config.elemsPerPage[mediaStep] >= items.length) {
        el.classList.add('not-enough-elems');
        return;
      }

      buildPages();
    },
    removeSlider: function removeSlider() {
      var wrapper = el.querySelector('.slider-wrapper');
      el.classList.remove('not-enough-elems');
      wrapper && wrapper.remove();
    },
    toggle: toggleIndex
  };

  function buildIndicators() {
    var prevInd = el.querySelector('.slider-indicators');
    prevInd && prevInd.remove();
    var indicators = document.createElement('div');
    indicators.classList.add('slider-indicators');

    var _loop = function _loop(i) {
      var indicator = document.createElement('div');
      indicator.classList.add('slider-indicator');

      if (i === activeIndIndex) {
        indicator.classList.add('active');
      }

      indicator.setAttribute('index', i);
      indicator.addEventListener('click', function () {
        toggleIndex(i);
      });
      indicators.appendChild(indicator);
    };

    for (var i = 0; i < Math.ceil(items.length / getItemsQuantity()); i++) {
      _loop(i);
    }

    var wrapper = el.querySelector('.slider-wrapper');
    wrapper.appendChild(indicators);
  }

  function buildPages(step) {
    step = step || 1;
    var pagePrev = buildPage(obj.activeIndex + items.length - getItemsQuantity() * step);
    var pageCurrent = buildPage(obj.activeIndex);
    var pageNext = buildPage(obj.activeIndex + getItemsQuantity() * step);
    var inner = el.querySelector('.slider-inner');

    if (getItemsQuantity() < items.length) {
      buildIndicators();

      if (!el.querySelector('.slider-indicator.active')) {// toggleIndex(0);
      }
    }

    inner.innerHTML = '';
    inner.appendChild(pagePrev);
    inner.appendChild(pageCurrent);
    inner.appendChild(pageNext);
  }

  function buildPage(index) {
    var page = document.createElement("div");
    page.classList.add('slider-page');

    for (var i = index; i < index + getItemsQuantity(); i++) {
      var item = items[i % items.length];
      var newItem = item.cloneNode(true);
      page.appendChild(newItem);
    }

    return page;
  }

  function toggleIndex(index) {
    var indActive = el.querySelector('.slider-indicator.active');
    var indicators = el.querySelectorAll('.slider-indicator');

    if (!indicators[index]) {
      return;
    }

    indActive && indActive.classList.remove('active');
    indicators[index] && indicators[index].classList.add('active');

    if (index > activeIndIndex) {
      index - activeIndIndex > 1 && buildPages(index - activeIndIndex);
      obj.next();
    } else if (index < activeIndIndex) {
      activeIndIndex - index > 1 && buildPages(activeIndIndex - index);
      obj.prev();
    }

    activeIndIndex = index;
    document.querySelector('.current').textContent = activeIndIndex + 1;
  }

  obj.prev = function () {
    var wrapper = el.querySelector('.slider-wrapper');
    wrapper.classList.add('prev');
    setTimeout(function () {
      wrapper.classList.remove('prev');
      obj.activeIndex = (obj.activeIndex - getItemsQuantity() + items.length) % items.length;
      buildPages();
    }, 300);
  };

  obj.next = function () {
    var wrapper = el.querySelector('.slider-wrapper');
    wrapper.classList.add('next');
    setTimeout(function () {
      wrapper.classList.remove('next');
      obj.activeIndex = (obj.activeIndex + getItemsQuantity() + items.length) % items.length;
      buildPages();
    }, 300);
  };

  return obj.init();
}

var icon = document.querySelector('.manifest__video-icon');
var img = document.querySelector('.manifest__video-img');
var videoIframe = document.querySelector('.video-iframe');
icon.addEventListener('click', function () {
  videoIframe.style.display = 'block';
  videoIframe.src = videoIframe.src + '?autoplay=1';
  icon.style.display = 'none';
  img.style.display = 'none';
});
"use strict";
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJzZWNvbmQuanMiXSwibmFtZXMiOlsidGVhbUxlZnRBcnJvdyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInRlYW1SaWdodEFycm93Iiwic2xpZGVyTGVuZ3RoIiwidGV4dENvbnRlbnQiLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwic2xpZGVyMSIsInNsaWRlciIsImlkIiwiaXRlbVNlbGVjdG9yIiwiY29uZmlnIiwiZWwiLCJnZXRFbGVtZW50QnlJZCIsImNsYXNzTGlzdCIsImFkZCIsIm1lZGlhU3RlcCIsImFjdGl2ZUluZEluZGV4IiwidG9vZ2xlSW5kZXgiLCJpdGVtcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJnZXRNZWRpYVN0ZXAiLCJ3aWR0aCIsIm5ld1N0ZXAiLCJvYmoiLCJidWlsZFNsaWRlciIsImdldEl0ZW1zUXVhbnRpdHkiLCJlbGVtc1BlclBhZ2UiLCJvblJlc2l6ZSIsImFjdGl2ZUluZGV4IiwiaW5pdCIsInN0YXJ0WCIsInRvdWNoZWQiLCJpbm5lciIsImluZGljYXRvcnMiLCJvbk1vdXNlRG93biIsImUiLCJjbGllbnRYIiwidG91Y2hlcyIsIndlZWtseSIsIm9uTW91c2VNb3ZlIiwicHJldmVudERlZmF1bHQiLCJ4IiwiZGlmZiIsImxlbmd0aCIsInN0eWxlIiwidHJhbnNmb3JtIiwib25Nb3VzZUVuZCIsImNoYW5nZWRUb3VjaGVzIiwidG9nZ2xlSW5kZXgiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInJlbW92ZVNsaWRlciIsIndyYXBwZXIiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwiYXBwZW5kQ2hpbGQiLCJidWlsZFBhZ2VzIiwicmVtb3ZlIiwidG9nZ2xlIiwiYnVpbGRJbmRpY2F0b3JzIiwicHJldkluZCIsImkiLCJpbmRpY2F0b3IiLCJzZXRBdHRyaWJ1dGUiLCJNYXRoIiwiY2VpbCIsInN0ZXAiLCJwYWdlUHJldiIsImJ1aWxkUGFnZSIsInBhZ2VDdXJyZW50IiwicGFnZU5leHQiLCJpbm5lckhUTUwiLCJpbmRleCIsInBhZ2UiLCJpdGVtIiwibmV3SXRlbSIsImNsb25lTm9kZSIsImluZEFjdGl2ZSIsIm5leHQiLCJwcmV2Iiwic2V0VGltZW91dCIsImljb24iLCJpbWciLCJ2aWRlb0lmcmFtZSIsImRpc3BsYXkiLCJzcmMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUEsQ0FBQyxZQUFZLENBSVosQ0FKRDs7QUFLQSxJQUFJQSxhQUFhLEdBQUdDLFFBQVEsQ0FBQ0MsYUFBVCxDQUF1QixzQkFBdkIsQ0FBcEI7QUFBQSxJQUNJQyxjQUFjLEdBQUdGLFFBQVEsQ0FBQ0MsYUFBVCxDQUF1Qix1QkFBdkIsQ0FEckI7QUFHQSxJQUFJRSxZQUFZLEdBQUdILFFBQVEsQ0FBQ0MsYUFBVCxDQUF1QixNQUF2QixDQUFuQjtBQUNBRSxZQUFZLENBQUNDLFdBQWIsR0FBMkIsQ0FBM0I7O0FBQ0EsSUFBSUMsTUFBTSxDQUFDQyxVQUFQLEdBQW9CLElBQXhCLEVBQThCO0VBQzFCSCxZQUFZLENBQUNDLFdBQWIsR0FBMkIsQ0FBM0I7QUFDSDs7QUFDRCxJQUFJQyxNQUFNLENBQUNDLFVBQVAsR0FBb0IsR0FBeEIsRUFBNkI7RUFDekJILFlBQVksQ0FBQ0MsV0FBYixHQUEyQixDQUEzQjtBQUNIOztBQUdESixRQUFRLENBQUNDLGFBQVQsQ0FBdUIsVUFBdkIsRUFBbUNHLFdBQW5DLEdBQWlELENBQWpEO0FBQ0EsSUFBSUcsT0FBTyxHQUFHQyxNQUFNLENBQUMsUUFBRCxFQUFXLGNBQVgsQ0FBcEI7O0FBRUEsU0FBU0EsTUFBVCxDQUFnQkMsRUFBaEIsRUFBb0JDLFlBQXBCLEVBQWtDQyxNQUFsQyxFQUEwQztFQUN0QyxJQUFJQyxFQUFFLEdBQUdaLFFBQVEsQ0FBQ2EsY0FBVCxDQUF3QkosRUFBeEIsQ0FBVDtFQUNBRyxFQUFFLENBQUNFLFNBQUgsQ0FBYUMsR0FBYixDQUFpQixRQUFqQjtFQUNBLElBQUlDLFNBQVMsR0FBRyxFQUFoQjtFQUNBLElBQUlDLGNBQWMsR0FBRyxD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O0VBUUgsQ0FYRDs7RUFhQSxPQUFPakMsR0FBRyxDQUFDTSxJQUFKLEVBQVA7QUFDSDs7QUFFRCxJQUFJb0QsSUFBSSxHQUFHbEYsUUFBUSxDQUFDQyxhQUFULENBQXVCLHVCQUF2QixDQUFYO0FBQ0EsSUFBSWtGLEdBQUcsR0FBR25GLFFBQVEsQ0FBQ0MsYUFBVCxDQUF1QixzQkFBdkIsQ0FBVjtBQUNBLElBQUltRixXQUFXLEdBQUdwRixRQUFRLENBQUNDLGFBQVQsQ0FBdUIsZUFBdkIsQ0FBbEI7QUFFQWlGLElBQUksQ0FBQ2hDLGdCQUFMLENBQXNCLE9BQXRCLEVBQStCLFlBQU07RUFDakNrQyxXQUFXLENBQUN2QyxLQUFaLENBQWtCd0MsT0FBbEIsR0FBNEIsT0FBNUI7RUFDQUQsV0FBVyxDQUFDRSxHQUFaLEdBQWtCRixXQUFXLENBQUNFLEdBQVosR0FBa0IsYUFBcEM7RUFDQUosSUFBSSxDQUFDckMsS0FBTCxDQUFXd0MsT0FBWCxHQUFxQixNQUFyQjtFQUNBRixHQUFHLENBQUN0QyxLQUFKLENBQVV3QyxPQUFWLEdBQW9CLE1BQXBCO0FBQ0gsQ0FMRDtBQ3RSQSIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uICgpIHtcblxuXG5cbn0pKCk7XG5sZXQgdGVhbUxlZnRBcnJvdyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50ZWFtX19jb250cm9scy1sZWZ0JyksXG4gICAgdGVhbVJpZ2h0QXJyb3cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGVhbV9fY29udHJvbHMtcmlnaHQnKVxuXG5sZXQgc2xpZGVyTGVuZ3RoID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFsbCcpO1xuc2xpZGVyTGVuZ3RoLnRleHRDb250ZW50ID0gNFxuaWYgKHdpbmRvdy5pbm5lcldpZHRoIDwgMTE1MCkge1xuICAgIHNsaWRlckxlbmd0aC50ZXh0Q29udGVudCA9IDVcbn1cbmlmICh3aW5kb3cuaW5uZXJXaWR0aCA8IDg1MCkge1xuICAgIHNsaWRlckxlbmd0aC50ZXh0Q29udGVudCA9IDdcbn1cblxuXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY3VycmVudCcpLnRleHRDb250ZW50ID0gMTtcbnZhciBzbGlkZXIxID0gc2xpZGVyKCdzbGlkZXInLCAnLnRlYW1fX3NsaWRlJyk7XG5cbmZ1bmN0aW9uIHNsaWRlcihpZCwgaXRlbVNlbGVjdG9yLCBjb25maWcpIHtcbiAgICB2YXIgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7XG4gICAgZWwuY2xhc3NMaXN0LmFkZCgnc2xpZGVyJylcbiAgICB2YXIgbWVkaWFTdGVwID0gJyc7XG4gICAgdmFyIGFjdGl2ZUluZEluZGV4ID0gMDtcbiAgICB2YXIgdG9vZ2xlSW5kZXggPSAwO1xuICAgIHZhciBpdGVtcyA9IGVsLnF1ZXJ5U2VsZWN0b3JBbGwoaXRlbVNlbGVjdG9yKTtcblxuICAgIGZ1bmN0aW9uIGdldE1lZGlhU3RlcCgpIHtcbiAgICAgICAgdmFyIHdpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG4gICAgICAgIHZhciBuZXdTdGVwID0gd2lkdGggPiAxMTUwID8gJ2xnJyA6IHdpZHRoID4gODUwID8gJ21kJyA6ICd4cyc7XG5cblxuICAgICAgICBpZiAobWVkaWFTdGVwICE9PSBuZXdTdGVwKSB7XG4gICAgICAgICAgICBtZWRpYVN0ZXAgPSBuZXdTdGVwO1xuICAgICAgICAgICAgb2JqLmJ1aWxkU2xpZGVyKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRJdGVtc1F1YW50aXR5KCkge1xuXG4gICAgICAgIHJldHVybiBvYmouY29uZmlnLmVsZW1zUGVyUGFnZVttZWRpYVN0ZXBdXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gb25SZXNpemUoKSB7XG4gICAgICAgIGdldE1lZGlhU3RlcCgpXG4gICAgfVxuXG4gICAgdmFyIG9iaiA9IHtcbiAgICAgICAgYWN0aXZlSW5kZXg6IDAsXG4gICAgICAgIGFjdGl2ZUluZEluZGV4OiBhY3RpdmVJbmRJbmRleCA+IDAgPyBhY3RpdmVJbmRJbmRleCA6IDAsXG4gICAgICAgIHRvb2dsZUluZGV4OiAwLFxuICAgICAgICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBnZXRNZWRpYVN0ZXAoKTtcblxuXG4gICAgICAgICAgICB2YXIgc3RhcnRYID0gMFxuICAgICAgICAgICAgdmFyIHRvdWNoZWQgPSBmYWxzZVxuXG4gICAgICAgICAgICB2YXIgaW5uZXIgPSBlbC5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyLWlubmVyJyk7XG4gICAgICAgICAgICB2YXIgaW5kaWNhdG9ycyA9IGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zbGlkZXItaW5kaWNhdG9yJyk7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIG9uTW91c2VEb3duKGUpIHtcbiAgICAgICAgICAgICAgICBzdGFydFggPSBlLmNsaWVudFggfHwgZS50b3VjaGVzWzBdLmNsaWVudFg7XG4gICAgICAgICAgICAgICAgdG91Y2hlZCA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICBjb25zdCB3ZWVrbHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucmVzdWx0X193ZWVrcy1idG4nKTtcbiAgICAgICAgICAgICAgICAvLyBmb3IgKGNvbnN0IGl0ZW0gb2Ygd2Vla2x5KSBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBzZWxlY3RXZWVrKTtcblxuXG4gICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgZnVuY3Rpb24gb25Nb3VzZU1vdmUoZSkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgICAgICAgICAgIGlmICh0b3VjaGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlubmVyID0gaW5uZXIgfHwgZWwucXVlcnlTZWxlY3RvcignLnNsaWRlci1pbm5lcicpXG4gICAgICAgICAgICAgICAgICAgIHZhciB4ID0gZS5jbGllbnRYIHx8IGUudG91Y2hlc1swXS5jbGllbnRYO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGlmZiA9IHggLSBzdGFydFg7XG4gICAgICAgICAgICAgICAgICAgIGlmICgoZGlmZiA8IDAgJiYgYWN0aXZlSW5kSW5kZXggPCBpbmRpY2F0b3JzLmxlbmd0aCAtIDEpIHx8IChkaWZmID4gMCAmJiBhY3RpdmVJbmRJbmRleCA+IDApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbm5lci5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlWCgnICsgZGlmZiArICdweCknXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIG9uTW91c2VFbmQoZSkge1xuICAgICAgICAgICAgICAgIGlmICh0b3VjaGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB4ID0gZS5jbGllbnRYIHx8IGUuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHggLSBzdGFydFggPiAzMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9nZ2xlSW5kZXgoYWN0aXZlSW5kSW5kZXggLSAxKVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHN0YXJ0WCAtIHggPiAzMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9nZ2xlSW5kZXgoYWN0aXZlSW5kSW5kZXggKyAxKVxuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaW5uZXIgPSBpbm5lciB8fCBlbC5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyLWlubmVyJylcbiAgICAgICAgICAgICAgICAgICAgaW5uZXIuc3R5bGUudHJhbnNmb3JtID0gJydcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdG91Y2hlZCA9IGZhbHNlXG4gICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgdGVhbVJpZ2h0QXJyb3cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdG9nZ2xlSW5kZXgoYWN0aXZlSW5kSW5kZXggKyAxKVxuICAgICAgICAgICAgICAgIC8vIG9iai5uZXh0KClcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIHRlYW1MZWZ0QXJyb3cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdG9nZ2xlSW5kZXgoYWN0aXZlSW5kSW5kZXggLSAxKVxuICAgICAgICAgICAgICAgIC8vIG9iai5wcmV2KClcblxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIG9uUmVzaXplKTtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBvblJlc2l6ZSk7XG4gICAgICAgICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBvbk1vdXNlRG93bik7XG4gICAgICAgICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0Jywgb25Nb3VzZURvd24pO1xuICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgb25Nb3VzZURvd24pO1xuICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIG9uTW91c2VEb3duKTtcbiAgICAgICAgICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIG9uTW91c2VNb3ZlKTtcbiAgICAgICAgICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIG9uTW91c2VNb3ZlKTtcbiAgICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIG9uTW91c2VNb3ZlKTtcbiAgICAgICAgICAgIC8vIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIG9uTW91c2VNb3ZlKTtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgb25Nb3VzZUVuZCk7XG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBvbk1vdXNlRW5kKTtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgb25Nb3VzZUVuZCk7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBvbk1vdXNlRW5kKTtcblxuICAgICAgICAgICAgcmV0dXJuIG9ialxuICAgICAgICB9LFxuICAgICAgICBjb25maWc6IHtcbiAgICAgICAgICAgIGVsZW1zUGVyUGFnZToge1xuICAgICAgICAgICAgICAgIC4uLntcbiAgICAgICAgICAgICAgICAgICAgJ2xnJzogNCxcbiAgICAgICAgICAgICAgICAgICAgJ21kJzogMyxcbiAgICAgICAgICAgICAgICAgICAgJ3hzJzogMlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgLi4uKChjb25maWcgJiYgY29uZmlnLmVsZW1zUGVyUGFnZSkgfHwge30pXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGJ1aWxkU2xpZGVyOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIG9iai5yZW1vdmVTbGlkZXIoKTtcblxuICAgICAgICAgICAgdmFyIHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgd3JhcHBlci5jbGFzc05hbWUgPSAnc2xpZGVyLXdyYXBwZXInO1xuICAgICAgICAgICAgdmFyIGlubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIGlubmVyLmNsYXNzTmFtZSA9ICdzbGlkZXItaW5uZXInO1xuXG4gICAgICAgICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKGlubmVyKTtcbiAgICAgICAgICAgIGVsLmFwcGVuZENoaWxkKHdyYXBwZXIpO1xuXG4gICAgICAgICAgICBpZiAob2JqLmNvbmZpZy5lbGVtc1BlclBhZ2VbbWVkaWFTdGVwXSA+PSBpdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKCdub3QtZW5vdWdoLWVsZW1zJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBidWlsZFBhZ2VzKCk7XG4gICAgICAgIH0sXG4gICAgICAgIHJlbW92ZVNsaWRlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHdyYXBwZXIgPSBlbC5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyLXdyYXBwZXInKTtcbiAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ25vdC1lbm91Z2gtZWxlbXMnKVxuICAgICAgICAgICAgd3JhcHBlciAmJiB3cmFwcGVyLnJlbW92ZSgpO1xuICAgICAgICB9LFxuICAgICAgICB0b2dnbGU6IHRvZ2dsZUluZGV4XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYnVpbGRJbmRpY2F0b3JzKCkge1xuICAgICAgICB2YXIgcHJldkluZCA9IGVsLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXItaW5kaWNhdG9ycycpO1xuICAgICAgICBwcmV2SW5kICYmIHByZXZJbmQucmVtb3ZlKCk7XG5cbiAgICAgICAgdmFyIGluZGljYXRvcnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgaW5kaWNhdG9ycy5jbGFzc0xpc3QuYWRkKCdzbGlkZXItaW5kaWNhdG9ycycpXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgTWF0aC5jZWlsKGl0ZW1zLmxlbmd0aCAvIGdldEl0ZW1zUXVhbnRpdHkoKSk7IGkrKykge1xuICAgICAgICAgICAgbGV0IGluZGljYXRvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgaW5kaWNhdG9yLmNsYXNzTGlzdC5hZGQoJ3NsaWRlci1pbmRpY2F0b3InKTtcbiAgICAgICAgICAgIGlmIChpID09PSBhY3RpdmVJbmRJbmRleCkge1xuICAgICAgICAgICAgICAgIGluZGljYXRvci5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcblxuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgIGluZGljYXRvci5zZXRBdHRyaWJ1dGUoJ2luZGV4JywgaSlcbiAgICAgICAgICAgIGluZGljYXRvci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0b2dnbGVJbmRleChpKVxuXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgaW5kaWNhdG9ycy5hcHBlbmRDaGlsZChpbmRpY2F0b3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHdyYXBwZXIgPSBlbC5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyLXdyYXBwZXInKVxuICAgICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKGluZGljYXRvcnMpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGJ1aWxkUGFnZXMoc3RlcCkge1xuXG4gICAgICAgIHN0ZXAgPSBzdGVwIHx8IDE7XG5cbiAgICAgICAgdmFyIHBhZ2VQcmV2ID0gYnVpbGRQYWdlKG9iai5hY3RpdmVJbmRleCArIGl0ZW1zLmxlbmd0aCAtIGdldEl0ZW1zUXVhbnRpdHkoKSAqIHN0ZXApO1xuXG5cbiAgICAgICAgdmFyIHBhZ2VDdXJyZW50ID0gYnVpbGRQYWdlKG9iai5hY3RpdmVJbmRleClcbiAgICAgICAgdmFyIHBhZ2VOZXh0ID0gYnVpbGRQYWdlKG9iai5hY3RpdmVJbmRleCArIGdldEl0ZW1zUXVhbnRpdHkoKSAqIHN0ZXApO1xuICAgICAgICB2YXIgaW5uZXIgPSBlbC5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyLWlubmVyJyk7XG4gICAgICAgIGlmIChnZXRJdGVtc1F1YW50aXR5KCkgPCBpdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGJ1aWxkSW5kaWNhdG9ycygpO1xuICAgICAgICAgICAgaWYgKCFlbC5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyLWluZGljYXRvci5hY3RpdmUnKSkge1xuICAgICAgICAgICAgICAgIC8vIHRvZ2dsZUluZGV4KDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlubmVyLmlubmVySFRNTCA9ICcnO1xuXG4gICAgICAgIGlubmVyLmFwcGVuZENoaWxkKHBhZ2VQcmV2KVxuICAgICAgICBpbm5lci5hcHBlbmRDaGlsZChwYWdlQ3VycmVudClcbiAgICAgICAgaW5uZXIuYXBwZW5kQ2hpbGQocGFnZU5leHQpXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYnVpbGRQYWdlKGluZGV4KSB7XG4gICAgICAgIHZhciBwYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKVxuICAgICAgICBwYWdlLmNsYXNzTGlzdC5hZGQoJ3NsaWRlci1wYWdlJylcbiAgICAgICAgZm9yIChsZXQgaSA9IGluZGV4OyBpIDwgKGluZGV4ICsgZ2V0SXRlbXNRdWFudGl0eSgpKTsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgaXRlbSA9IGl0ZW1zW2kgJSBpdGVtcy5sZW5ndGhdO1xuICAgICAgICAgICAgbGV0IG5ld0l0ZW0gPSBpdGVtLmNsb25lTm9kZSh0cnVlKTtcbiAgICAgICAgICAgIHBhZ2UuYXBwZW5kQ2hpbGQobmV3SXRlbSlcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFnZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gdG9nZ2xlSW5kZXgoaW5kZXgpIHtcbiAgICAgICAgdmFyIGluZEFjdGl2ZSA9IGVsLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXItaW5kaWNhdG9yLmFjdGl2ZScpXG4gICAgICAgIHZhciBpbmRpY2F0b3JzID0gZWwucXVlcnlTZWxlY3RvckFsbCgnLnNsaWRlci1pbmRpY2F0b3InKTtcbiAgICAgICAgaWYgKCFpbmRpY2F0b3JzW2luZGV4XSkge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgaW5kQWN0aXZlICYmIGluZEFjdGl2ZS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKVxuICAgICAgICBpbmRpY2F0b3JzW2luZGV4XSAmJiBpbmRpY2F0b3JzW2luZGV4XS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKVxuICAgICAgICBpZiAoaW5kZXggPiBhY3RpdmVJbmRJbmRleCkge1xuICAgICAgICAgICAgaW5kZXggLSBhY3RpdmVJbmRJbmRleCA+IDEgJiYgYnVpbGRQYWdlcyhpbmRleCAtIGFjdGl2ZUluZEluZGV4KVxuICAgICAgICAgICAgb2JqLm5leHQoKTtcbiAgICAgICAgfSBlbHNlIGlmIChpbmRleCA8IGFjdGl2ZUluZEluZGV4KSB7XG4gICAgICAgICAgICBhY3RpdmVJbmRJbmRleCAtIGluZGV4ID4gMSAmJiBidWlsZFBhZ2VzKGFjdGl2ZUluZEluZGV4IC0gaW5kZXgpXG4gICAgICAgICAgICBvYmoucHJldigpXG4gICAgICAgIH1cbiAgICAgICAgYWN0aXZlSW5kSW5kZXggPSBpbmRleFxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jdXJyZW50JykudGV4dENvbnRlbnQgPSBhY3RpdmVJbmRJbmRleCArIDE7XG5cblxuICAgIH1cblxuICAgIG9iai5wcmV2ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgd3JhcHBlciA9IGVsLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXItd3JhcHBlcicpXG4gICAgICAgIHdyYXBwZXIuY2xhc3NMaXN0LmFkZCgncHJldicpO1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHdyYXBwZXIuY2xhc3NMaXN0LnJlbW92ZSgncHJldicpXG4gICAgICAgICAgICBvYmouYWN0aXZlSW5kZXggPSAob2JqLmFjdGl2ZUluZGV4IC0gZ2V0SXRlbXNRdWFudGl0eSgpICsgaXRlbXMubGVuZ3RoKSAlIGl0ZW1zLmxlbmd0aDtcbiAgICAgICAgICAgIGJ1aWxkUGFnZXMoKVxuICAgICAgICB9LCAzMDApO1xuICAgIH1cblxuICAgIG9iai5uZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgd3JhcHBlciA9IGVsLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXItd3JhcHBlcicpXG4gICAgICAgIHdyYXBwZXIuY2xhc3NMaXN0LmFkZCgnbmV4dCcpO1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHdyYXBwZXIuY2xhc3NMaXN0LnJlbW92ZSgnbmV4dCcpXG4gICAgICAgICAgICBvYmouYWN0aXZlSW5kZXggPSAob2JqLmFjdGl2ZUluZGV4ICsgZ2V0SXRlbXNRdWFudGl0eSgpICsgaXRlbXMubGVuZ3RoKSAlIGl0ZW1zLmxlbmd0aDtcblxuICAgICAgICAgICAgYnVpbGRQYWdlcygpXG5cblxuICAgICAgICB9LCAzMDApO1xuICAgIH1cblxuICAgIHJldHVybiBvYmouaW5pdCgpO1xufVxuXG52YXIgaWNvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYW5pZmVzdF9fdmlkZW8taWNvbicpO1xudmFyIGltZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYW5pZmVzdF9fdmlkZW8taW1nJyk7XG52YXIgdmlkZW9JZnJhbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudmlkZW8taWZyYW1lJyk7XG5cbmljb24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgdmlkZW9JZnJhbWUuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgdmlkZW9JZnJhbWUuc3JjID0gdmlkZW9JZnJhbWUuc3JjICsgJz9hdXRvcGxheT0xJztcbiAgICBpY29uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgaW1nLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG59KSIsIiJdfQ==
